# --- è¨­å®šå€¤ ---
input_string = "ExampleString"  # ãƒãƒƒã‚·ãƒ¥åŒ–ã—ãŸã„æ–‡å­—åˆ—
table_size = 15                 # ãƒãƒƒã‚·ãƒ¥è¡¨ï¼ˆé…åˆ—ï¼‰ã®å¤§ãã• (Mã¨ã™ã‚‹)
C = 3                           # è¡çªæ™‚ã«åŠ ç®—ã™ã‚‹å®šæ•° (C)
collision_detected = True       # è¡çªãŒç™ºç”Ÿã—ãŸã¨ä»®å®š (True/Falseã§åˆ‡ã‚Šæ›¿ãˆ)
# ---

# 1. æ–‡å­—ã‚³ãƒ¼ãƒ‰ã®åˆè¨ˆã‚’è¨ˆç®— (ä¸­é–“ãƒãƒƒã‚·ãƒ¥å€¤ã®ç”Ÿæˆ)
hash_sum = 0
for char in input_string:
    # ord(char) ã§æ–‡å­—ã®Unicodeã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆæ•°å€¤ï¼‰ã‚’å–å¾—
    hash_sum += ord(char)

# 2. åˆæœŸãƒãƒƒã‚·ãƒ¥å€¤ï¼ˆã‚ªãƒªã‚¸ãƒŠãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼‰ã®è¨ˆç®—
#    h(k) = sum(ord(k)) mod M
initial_hash_index = hash_sum % table_size

# 3. è¡çªæ™‚ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å†è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
#    è¡çªãŒæ¤œå‡ºã•ã‚ŒãŸã¨ä»®å®šã—ãŸå ´åˆã€æ–°ã—ã„ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¨ˆç®—ã™ã‚‹
if collision_detected:
    # æ–°ã—ã„ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹: h'(k) = (h(k) + C) mod M
    # (h(k) ã¯ initial_hash_index)
    final_hash_index = (initial_hash_index + C) % table_size
    print("ğŸ”” è¡çªãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚å®šæ•°Cã‚’åŠ ç®—ã—ã¦å†è¨ˆç®—ã‚’è¡Œã„ã¾ã™ã€‚")
else:
    # è¡çªãŒãªã‘ã‚Œã°ã€åˆæœŸãƒãƒƒã‚·ãƒ¥å€¤ã‚’ãã®ã¾ã¾ä½¿ç”¨ã™ã‚‹
    final_hash_index = initial_hash_index

# --- çµæœã®å‡ºåŠ› ---
print("--- ãƒãƒƒã‚·ãƒ¥è¨ˆç®—çµæœ ---")
print(f"å…¥åŠ›æ–‡å­—åˆ—: '{input_string}'")
print(f"ãƒãƒƒã‚·ãƒ¥è¡¨ã®å¤§ãã• (M): {table_size}")
print(f"è¡çªæ™‚ã®å®šæ•° (C): {C}")
print(f"åˆæœŸãƒãƒƒã‚·ãƒ¥å€¤ (h(k)): {initial_hash_index}")
print(f"æœ€çµ‚ãƒãƒƒã‚·ãƒ¥å€¤ (ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹): {final_hash_index}")